<!doctype html>
<html lang="el">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Google tag (gtag.js) -->





  <title>Προϊόντα | Euronics Πανταζής — Τηλεοράσεις, Λευκές Συσκευές, Κλιματισμός (Ήπειρος)</title>
  <meta name="description" content="Δες όλα τα προϊόντα: τηλεοράσεις, υπολογιστές, λευκές συσκευές, κλιματισμός, gaming κ.ά. Παράδοση & εγκατάσταση σε Θεσπρωτία, Ιωάννινα, Πρέβεζα, Άρτα." />
  <link rel="canonical" href="https://pantazis-euronics.gr/products.html" />
  <meta name="robots" content="index, follow, max-image-preview:large" />
  <meta name="theme-color" content="#0b57d0" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Euronics Πανταζής" />
  <meta property="og:title" content="Προϊόντα | Euronics Πανταζής" />
  <meta property="og:description" content="Μεταφορά & εγκατάσταση σε όλη την Ήπειρο." />
  <meta property="og:url" content="https://pantazis-euronics.gr/products.html" />
  <meta property="og:image" content="https://pantazis-euronics.gr/images/og-home.jpg" />  <!-- TODO-->
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="el_GR" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Προϊόντα | Euronics Πανταζής" />
  <meta name="twitter:description" content="Μεταφορά & εγκατάσταση σε όλη την Ήπειρο." />
  <meta name="twitter:image" content="https://pantazis-euronics.gr/images/og-home.jpg" /> <!-- TODO-->
  
  <!-- Hreflang -->
  <meta property="og:locale:alternate" content="en_US" />
  <link rel="alternate" href="https://pantazis-euronics.gr/products.html" hreflang="el-GR" />
  <link rel="alternate" href="https://pantazis-euronics.gr/products.html" hreflang="x-default" />

  <!-- Assets -->
  <link rel="preload" href="style.css" as="style">
  <link rel="stylesheet" href="style.css" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" />

  <!-- Breadcrumbs -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Αρχική","item":"https://pantazis-euronics.gr/"},
      {"@type":"ListItem","position":2,"name":"Προϊόντα","item":"https://pantazis-euronics.gr/products.html"}
    ]
  }
  </script>

  <!-- Minimal Store JSON-LD ώστε να επιλύεται το @id (#store) από τα Offers -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"ElectronicsStore",
    "@id":"https://pantazis-euronics.gr/#store",
    "name":"Euronics Πανταζής",
    "url":"https://pantazis-euronics.gr/"
  }
  </script>
</head>



<body>
  <a href="#main" class="skip">Μετάβαση στο περιεχόμενο</a>
  <!-- Nav  -->
  <nav class="nav" aria-label="Κύρια πλοήγηση">
    <div class="container nav-inner">
      <a href="index.html" class="logo" aria-label="Αρχική">
        <img class="logo-star" src="/apple-touch-icon.png" alt="" aria-hidden="true" width="28" height="28" decoding="async" fetchpriority="high">
        <div class="brand-wrap">
          <div class="brand">euronics</div>
          <div class="sub">ΠΑΝΤΑΖΗΣ • Ηγουμενίτσα</div>
        </div>
      </a>
      <button class="hamb" aria-label="Μενού" aria-expanded="false" aria-controls="menu">☰</button>
      <div id="menu" class="menu">
        <a href="products.html" aria-current="page">Προϊόντα</a>
        <a href="index.html#services" >Υπηρεσίες</a>
        <a href="index.html#brands" >Μάρκες</a>
        <a href="index.html#reviews" >Αξιολογήσεις</a>
        <a href="index.html#faq" >Συχνές Ερωτήσεις</a>
        <a href="contact.html" >Επικοινωνία</a>
      </div>
    </div>
  </nav>


  <main id="main" class="section">
    <div class="container">
      <h1>Προϊόντα</h1>
      <!-- Controls: Search + Dynamic Category Chips -->
      <div class="controls stack-m">
        <div class="searchbar" role="search">
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M15.5 14h-.8l-.3-.3a6.5 6.5 0 10-.7.7l.3.3v.8l5 5 1.5-1.5-5-5zM10 15a5 5 0 110-10 5 5 0 010 10z"/>
          </svg>
          <label class="sr-only" for="search">Αναζήτηση προϊόντων</label>
          <input id="search" type="search"
                placeholder="Αναζήτηση… (π.χ. τηλεόραση, 8kg, Dyson)"
                autocomplete="off" />
          <button type="button" id="clearSearch" class="clear" aria-label="Καθαρισμός αναζήτησης">×</button>
          <kbd class="slash" aria-hidden="true">/</kbd>
        </div>

        <!-- Το sort θα μπει αυτόματα εδώ από το inline JS του products.html -->
        <div id="chips" class="chips" role="tablist" aria-label="Φίλτρα κατηγορίας"></div>
      </div>

      <!-- Results meta -->
      <div id="meta" class="muted">Φόρτωση προϊόντων…</div>

      <!-- Grid --> 
      <section id="grid" class="grid products" aria-live="polite" aria-busy="true"></section>
    </div>
  </main>

  <footer class="site-footer" role="contentinfo">
    <div class="container footer-top">
      <div class="footer-contacts">
        <!-- ΤΗΛΕΦΩΝΑ -->
        <div class="fc fc-phone">
          <h3>Τηλέφωνα</h3>
          <p class="phones">
            <a class="tel" href="tel:+302665409100" aria-label="Κλήση στο σταθερό 2665 409100">2665 409100</a>
            <span class="sep">•</span>
            <a class="tel" href="tel:+306959666060" aria-label="Κλήση στο κινητό 6959 66 6060">6959 66 6060</a>
          </p>
          <p class="msg">
            <a class="chip" href="https://wa.me/306959666060" target="_blank" rel="noopener noreferrer" aria-label="Μήνυμα στο WhatsApp">
              WhatsApp
            </a>
            <a class="chip" href="viber://chat?number=%2B306959666060" aria-label="Μήνυμα στο Viber">
              Viber
            </a>
          </p>
        </div>

        <!-- EMAIL -->
        <div class="fc fc-email">
          <h3>Email</h3>
          <p>
            <a href="mailto:pantazis@euronics.gr">pantazis@euronics.gr</a>
            <span class="sep">•</span>
            <a href="https://mail.google.com/mail/?view=cm&fs=1&to=pantazis@euronics.gr&su=%CE%95%CF%80%CE%B9%CE%BA%CE%BF%CE%B9%CE%BD%CF%89%CE%BD%CE%AF%CE%B1%20%CE%B1%CF%80%CF%8C%20%CF%84%CE%BF%20site"
              target="_blank" rel="noopener">Άνοιγμα&nbsp;Gmail
            </a>
          </p>
        </div>

        <!-- ΔΙΕΥΘΥΝΣΗ -->
        <div class="fc fc-address">
          <h3>Διεύθυνση</h3>
          <p>
            <a href="https://www.google.com/maps/place/Euronics+%CE%A0%CE%B1%CE%BD%CF%84%CE%B1%CE%B6%CE%AE%CF%82/@39.4972044,20.2607816,17z/data=!3m1!4b1!4m6!3m5!1s0x135b7fef5e9b44c1:0x2e7c6b0351777df1!8m2!3d39.4972045!4d20.2656525!16s%2Fg%2F11rndhl_5c?entry=ttu&g_ep=EgoyMDI1MDgzMC4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener noreferrer" aria-label="Άνοιγμα στο Google Maps">
              49 Μαρτύρων 15 — Ηγουμενίτσα
            </a>
          </p>
        </div>

        <!-- SOCIAL -->
        <div class="fc fc-social">
          <h3>Social</h3>
          <p class="socials">
            <a class="social" href="https://www.instagram.com/pantaziseuronics/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
              <!-- Instagram SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="24" height="24" fill="currentColor">
                <path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/>
              </svg>
            </a>
            <a class="social" href="https://www.facebook.com/electro.pantazis/" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
              <!-- Facebook SVG -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24" fill="currentColor">
                <path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256C0 376 82.7 476.8 194.2 504.5V334.2H141.4V256h52.8V222.3c0-87.1 39.4-127.5 125-127.5c16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1c-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287V510.1C413.8 494.8 512 386.9 512 256h0z"/>
              </svg>
            </a>
          </p>
        </div>
      </div>
    </div>

    <div class="container footer-bottom">
      <small>© <span id="y"></span> Euronics Πανταζής — Ηγουμενίτσα</small>
      <!-- <small class="madeby">Κατασκευή: <a href="https://github.com/EXARTeo" rel="author">EXARTeo</a></small> -->
    </div>
  </footer>


  <script src="script.js"></script>
  <script>
    // Products page bootstrap (safe on pages without grid/chips)
    // ————— Products page bootstrap (sort + pagination + URL params + SUBCATS) —————
    (function () {
      const $  = (s,o=document)=>o.querySelector(s);
      const $$ = (s,o=document)=>[...o.querySelectorAll(s)];

      // DOM refs
      const grid        = $('#grid');
      const chipsWrap   = $('#chips');
      const searchInput = $('#search');
      const meta        = $('#meta');

      // === Labels (κύριες κατηγορίες) ===
      const CAT_LABELS = {
        av: 'Εικόνα & Ήχος',
        imaging: 'Φωτογραφία & Video',
        computing: 'Υπολογιστές',
        telephony: 'Τηλεφωνία',
        gaming: 'Gaming',
        climate: 'Κλιματισμός & Θέρμανση',
        appliances: 'Λευκές Συσκευές',
        home: 'Οικιακός Εξοπλισμός',
        personal: 'Προσωπική Φροντίδα'
      };

      // === Υποκατηγορίες ανά κύρια (slug, label) ===
      const SUB_MAP = {
        av:         [['tv','TV'], ['av-peripherals','Περιφερειακά']],
        imaging:    [['cameras','Φωτογραφικές μηχανές'], ['imaging-acc','Αξεσουάρ']],
        computing:  [['laptop','Laptops'], ['desktop','Desktop'], ['pc-peripherals','Περιφερειακά']],
        telephony:  [['mobile','Κινητή'], ['fixed','Σταθερή'], ['wearables','Wearables']],
        gaming:     [['pc','PC'], ['console','Console'], ['gaming-peripherals','Περιφερειακά']],
        climate:    [['ac','Air condition'], ['air-care','Ιονιστές/Υγραντήρες/Καθαριστές αέρα'], ['fans','Ανεμιστήρες'], ['dehumid','Αφυγραντήρες']],
        appliances: [['fridge','Ψυγεία'], ['wash-dry','Πλυντήρια/Στεγνωτήρια'], ['cooktops','Κουζινάκια'], ['microwave','Φουρνάκια μικροκυμάτων'], ['cookers','Κουζίνες']],
        home:       [['vacuum','Σκούπες'], ['ironing','Σιδερώματος'], ['beverages','Ροφημάτων'], ['sewing','Ραπτομηχανές']],
        personal:   [['women','Γυναικεία'], ['men','Ανδρική'], ['kids','Παιδική'], ['wellness','Υγεία & Ευεξία']]
      };

      // === Αντιστροφή: sub-slug -> main code ===
      const SUB_TO_MAIN = (() => {
        const map = {};
        for (const [main, arr] of Object.entries(SUB_MAP)) {
          for (const [slug] of arr) map[slug.toLowerCase()] = main;
        }
        return map;
      })();

      // Container για υπο-chips
      let subWrap = $('#subchips');
      if (!subWrap) {
        subWrap = document.createElement('div');
        subWrap.id = 'subchips';
        subWrap.className = 'chips subchips';
        subWrap.style.display = 'none';
        chipsWrap?.after(subWrap);
      }

      // SORT select
      let sortSel = $('#sort');
      (function ensureSortControl(){
        if (!sortSel) {
          const controls = searchInput?.closest('.controls') || chipsWrap?.parentElement || document.body;
          const wrap = document.createElement('div');
          wrap.className = 'control-inline';

          const label = document.createElement('label');
          label.className = 'sr-only';
          label.htmlFor = 'sort';
          label.textContent = 'Ταξινόμηση';

          sortSel = document.createElement('select');
          sortSel.id = 'sort';
          sortSel.setAttribute('aria-label','Ταξινόμηση');
          sortSel.innerHTML = `
            <option value="reco">Προτεινόμενα</option>
            <option value="price_asc">Τιμή ↑</option>
            <option value="price_desc">Τιμή ↓</option>
            <option value="alpha">Αλφαβητικά Α–Ω</option>
          `;

          if (chipsWrap && controls) { wrap.append(label, sortSel); controls.insertBefore(wrap, chipsWrap); }
          else { wrap.append(label, sortSel); controls.appendChild(wrap); }
        }
      })();

      // PAGER
      let pager = $('#pager');
      (function ensurePager(){
        if (!pager) {
          pager = document.createElement('nav');
          pager.id = 'pager';
          pager.className = 'pager';
          pager.setAttribute('aria-label','Πλοήγηση σελίδων');
          grid?.after(pager);
        }
      })();

      // State
      let ALL = [];
      let VIEW = [];
      let activeCat = 'all'; // main code
      let activeSub = 'all'; // sub slug (ίδιο με product.cat)
      let q = '';
      let page = 1;
      const PAGE_SIZE = 12;

      // Data
      async function fetchProducts(){
        if (typeof window.getProducts === 'function') { try { return await window.getProducts(); } catch(_) {} }
        try {
          const res = await fetch('products.json', { cache: 'no-cache' });
          if (!res.ok) throw 0;
          const data = await res.json();
          return Array.isArray(data) ? data : [];
        } catch { return []; }
      }

      // Utils
      // —— Structured Data & rel=prev/next ——
      function updateStructuredData(list, page, pages){
        // 1) ItemList JSON-LD των ορατών προϊόντων (τρέχουσα σελίδα)
        const head = document.head;
        const old = document.getElementById('jsonld-list');
        if (old) old.remove();

        const items = list.map((p, i) => {
          const skuStr = p.sku ? String(p.sku) : '';
          const priceNum = (typeof p.price === 'number')
            ? p.price
            : Number(String(p.price||'').replace(/[^\d.,]/g,'').replace(/\./g, '').replace(',', '.')) || '';
          const url = `https://pantazis-euronics.gr/products.html${skuStr ? `?sku=${encodeURIComponent(skuStr)}` : ''}`;

          const product = {
            "@type": "Product",
            "name": p.title || "Προϊόν",
            ...(p.img ? {"image": `https://pantazis-euronics.gr/${String(p.img).replace(/^\/?/,'')}`} : {}),
            ...(p.meta ? {"description": p.meta} : {}),
            ...(skuStr ? {"sku": skuStr} : {}),
            ...(p.brand ? {"brand": p.brand} : {}),
            "offers": {
              "@type":"Offer",
              "priceCurrency":"EUR",
              ...(priceNum ? {"price": String(priceNum)} : {}),
              "availability":"https://schema.org/InStoreOnly",
              "itemCondition":"https://schema.org/NewCondition",
              "seller":{"@id":"https://pantazis-euronics.gr/#store"}
            },
            "url": url
          };

          return { "@type":"ListItem", "position": i + 1, "url": url, "item": product };
        });

        const json = {
          "@context":"https://schema.org",
          "@type":"ItemList",
          "@id":"https://pantazis-euronics.gr/products.html#list",
          "itemListOrder":"https://schema.org/ItemListUnordered",
          "numberOfItems": list.length,
          "itemListElement": items
        };

        const s = document.createElement('script');
        s.type = 'application/ld+json';
        s.id = 'jsonld-list';
        s.textContent = JSON.stringify(json);
        head.appendChild(s);

        // 2) rel=prev/next για σελιδοποίηση με ?page=
        const mk = (id, rel, href) => {
          let link = document.getElementById(id);
          if (!href) { if (link) link.remove(); return; }
          if (!link) { link = document.createElement('link'); link.id = id; link.rel = rel; head.appendChild(link); }
          link.href = href;
        };
        const url = new URL(location.href);
        const base = url.origin + url.pathname;

        // prev
        if (page > 1){
          url.searchParams.set('page', String(page - 1));
          mk('relprev', 'prev', base + '?' + url.searchParams.toString());
        } else mk('relprev', 'prev', null);

        // next
        if (page < pages){
          url.searchParams.set('page', String(page + 1));
          mk('relnext', 'next', base + '?' + url.searchParams.toString());
        } else mk('relnext', 'next', null);
      }


      const esc = s => String(s==null?'' : s)
        .replace(/[&<>\"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
      const money = v => {
        if (v==null || v==='') return '';
        const n = Number(String(v).replace(/[^\d.,]/g,'').replace(/\./g,'').replace(',', '.'));
        if (!isFinite(n)) return esc(v);
        return new Intl.NumberFormat('el-GR', { style:'currency', currency:'EUR', maximumFractionDigits:0 }).format(n);
      };
      const num = (v) => {
        if (typeof v === 'number') return v;
        if (v == null) return 0;

        // 1) καθάρισε space, €, κλπ. αλλά κράτα μόνο ψηφία, κόμμα, τελεία και -
        let s = String(v).trim().replace(/[^\d.,-]/g, '');

        // 2) βρες ποιος είναι ο δεκαδικός διαχωριστής (ο ΔΕΞΙΟΤΕΡΟΣ από κόμμα/τελεία)
        const lastComma = s.lastIndexOf(',');
        const lastDot   = s.lastIndexOf('.');
        const hasSep    = (lastComma !== -1) || (lastDot !== -1);

        if (hasSep) {
          const decIdx  = Math.max(lastComma, lastDot);     // δεξιότερος διαχωριστής
          const intPart = s.slice(0, decIdx).replace(/[^\d-]/g, ''); // βγάλε ΟΛΑ τα υπόλοιπα σημ. από το ακέραιο
          const decPart = s.slice(decIdx + 1).replace(/[^\d]/g, ''); // κράτα μόνο ψηφία στο δεκαδικό
          s = decPart ? `${intPart}.${decPart}` : intPart;   // φτιάξε canonical "1234.56"
        } else {
          // καθόλου κόμμα/τελεία -> απλό ακέραιο
          s = s.replace(/[^\d-]/g, '');
        }

        const n = Number(s);
        return Number.isFinite(n) ? n : 0;
      };

      function sortList(list){
        if (!sortSel) return list;
        switch (sortSel.value) {
          case 'price_asc':  return list.sort((a,b)=> num(a.price) - num(b.price));
          case 'price_desc': return list.sort((a,b)=> num(b.price) - num(a.price));
          case 'alpha':      return list.sort((a,b)=> String(a.title||'').localeCompare(String(b.title||''), 'el'));
          default:           return list;
        }
      }

      function fallbackCardTpl(p){
        const old = p.old ? `<span class="old">${money(p.old)}</span>` : '';
        const meta = p.meta ? `<p class="meta">${esc(p.meta)}</p>` : '';
        const imgAlt = esc(p.alt || p.title || 'Προϊόν');
        return `
          <article class="card" data-cat="${esc(p.cat||'')}" ${p.sku ? `data-sku="${esc(p.sku)}"` : ''}>
            <img src="${esc(p.img||'images/placeholder.jpg')}" alt="${imgAlt}" loading="lazy" width="800" height="600" />
            <div class="card-body">
              <h3 class="card-title">${esc(p.title||'Χωρίς τίτλο')}</h3>
              ${meta}
              ${p.sku ? `<div class="sku muted">• ${esc(p.sku)}</div>` : ''}
              <div class="price-row">${old}<span class="price">${money(p.price)}</span></div>
              ${p.badge ? `<span class="badge">${esc(p.badge)}</span>` : ''}
            </div>
          </article>`;
      }

      function getCatLabel(code){ return CAT_LABELS[code] || code; }
      function getSubLabel(cat, sub){
        const pair = (SUB_MAP[cat] || []).find(([slug]) => slug === sub);
        return pair ? pair[1] : sub;
      }

      // ——— UI: κύριες κατηγορίες
      function buildChips(presentMainCodes){
        if (!chipsWrap) return;
        chipsWrap.innerHTML = '';
        const cats = ['all', ...presentMainCodes];
        for (const c of cats){
          const btn = document.createElement('button');
          btn.className = 'chip';
          btn.setAttribute('role','tab');
          btn.dataset.filter = c;
          btn.textContent = (c==='all' ? 'Όλα' : getCatLabel(c));
          btn.addEventListener('click', ()=>{
            $$('.chip', chipsWrap).forEach(x=>x.classList.toggle('active', x===btn));
            activeCat = c;       // main
            activeSub = 'all';   // reset sub
            page = 1;
            buildSubchips(c);
            render();
            updateURL();
          });
          chipsWrap.appendChild(btn);
        }
        const toActivate = chipsWrap.querySelector(`.chip[data-filter="${CSS.escape(activeCat)}"]`) || chipsWrap.querySelector('.chip');
        toActivate?.click();
      }

      // ——— UI: υποκατηγορίες
      function buildSubchips(mainCode){
        if (!subWrap) return;
        subWrap.innerHTML = '';
        const sub = SUB_MAP[mainCode] || [];
        if (!sub.length || mainCode==='all'){
          subWrap.style.display = 'none';
          return;
        }
        // "Όλες"
        const allBtn = document.createElement('button');
        allBtn.className = 'chip';
        allBtn.dataset.sub = 'all';
        allBtn.textContent = 'Όλες';
        allBtn.addEventListener('click', ()=>{
          $$('.chip', subWrap).forEach(x=>x.classList.toggle('active', x===allBtn));
          activeSub = 'all'; page = 1; render(); updateURL();
        });
        subWrap.appendChild(allBtn);

        // υπόλοιπες
        sub.forEach(([slug,label])=>{
          const b = document.createElement('button');
          b.className = 'chip';
          b.dataset.sub = slug;
          b.textContent = label;
          b.addEventListener('click', ()=>{
            $$('.chip', subWrap).forEach(x=>x.classList.toggle('active', x===b));
            activeSub = slug; page = 1; render(); updateURL();
          });
          subWrap.appendChild(b);
        });

        // αρχική επιλογή
        [...subWrap.querySelectorAll('.chip')].forEach(x=>x.classList.remove('active'));
        const def = subWrap.querySelector(`.chip[data-sub="${CSS.escape(activeSub)}"]`) || allBtn;
        def.classList.add('active');

        subWrap.style.display = '';
      }

      function updateURL(){
        const params = new URLSearchParams(location.search);
        if (activeCat && activeCat!=='all') params.set('cat', activeCat); else params.delete('cat');
        if (activeSub && activeSub!=='all') params.set('sub', activeSub); else params.delete('sub');
        if (q) params.set('q', q); else params.delete('q');
        if (sortSel && sortSel.value && sortSel.value !== 'reco') params.set('sort', sortSel.value); else params.delete('sort');
        if (page && page > 1) params.set('page', String(page)); else params.delete('page');
        const qs = params.toString();
        history.replaceState(null, '', qs ? `?${qs}` : location.pathname);
      }

      function render(){
        if (!grid) return;

        // Φίλτρο με βάση: MAIN από το SUB_TO_MAIN[product.cat] και SUB = product.cat
        let list = ALL.filter(p=>{
          const prodSub  = String(p.cat||'').toLowerCase();              // εδώ είναι το sub-slug
          const prodMain = SUB_TO_MAIN[prodSub];                          // infer main
          const catOk = (activeCat==='all') || (prodMain === activeCat);
          if (!catOk) return false;
          const subOk = (activeSub==='all') || (prodSub === activeSub);
          if (!subOk) return false;
          if (!q) return true;
          const hay = [p.title, p.meta, p.brand, p.sku, prodSub, prodMain].map(x=>String(x||'').toLowerCase()).join(' ');
          return hay.includes(q.toLowerCase());
        });

        list = sortList([...list]);

        // Σελιδοποίηση
        const total = list.length;
        const pages = Math.max(1, Math.ceil(total / PAGE_SIZE));
        page = Math.min(Math.max(1, page), pages);
        const start = (page - 1) * PAGE_SIZE;
        const subset = list.slice(start, start + PAGE_SIZE);
        VIEW = subset;

        const tpl = (typeof window.cardTpl === 'function') ? window.cardTpl : fallbackCardTpl;
        grid.setAttribute('aria-busy','true');
        grid.innerHTML = subset.map(p => tpl(p)).join('') || '<p class="muted">Δεν βρέθηκαν προϊόντα με αυτά τα φίλτρα.</p>';
        grid.removeAttribute('aria-busy');
        
        updateStructuredData(subset, page, pages); //<!-- change -->

        // meta
        if (meta) {
          const metaText = [];
          metaText.push(total === 1 ? '1 προϊόν' : `${total} προϊόντα`);
          if (activeCat && activeCat!=='all') metaText.push(`• Κατηγορία: ${getCatLabel(activeCat)}`);
          if (activeSub && activeSub!=='all') metaText.push(`• Υποκατηγορία: ${getSubLabel(activeCat, activeSub)}`);
          if (q) metaText.push(`• Αναζήτηση: “${q}”`);
          meta.textContent = metaText.join(' ');
        }

        renderPager(total, pages);
      }

      function renderPager(total, pages){
        if (!pager) return;
        pager.innerHTML = '';

        const prev = document.createElement('button');
        prev.textContent = '‹ Προηγούμενη';
        prev.disabled = page <= 1;
        prev.addEventListener('click', ()=>{ page = Math.max(1, page - 1); render(); updateURL(); });

        const info = document.createElement('span');
        info.className = 'pageinfo';
        info.textContent = `Σελίδα ${page} από ${pages}`;

        const next = document.createElement('button');
        next.textContent = 'Επόμενη ›';
        next.disabled = page >= pages;
        next.addEventListener('click', ()=>{ page = Math.min(pages, page + 1); render(); updateURL(); });

        pager.append(prev, info, next);
      }

      function initFromURL(){
        const params = new URLSearchParams(location.search);
        activeCat = params.get('cat') || 'all';          // main code
        activeSub = params.get('sub') || 'all';          // sub slug
        q = params.get('q') || '';
        if (q && searchInput) searchInput.value = q;
        const sort = params.get('sort');
        if (sort && sortSel) sortSel.value = sort;
        const p = parseInt(params.get('page')||'1', 10);
        page = Number.isFinite(p) && p > 0 ? p : 1;

        // Αν έχει έρθει μόνο sub, συμπλήρωσε main
        if ((activeCat === 'all') && (activeSub !== 'all')) {
          const m = SUB_TO_MAIN[String(activeSub).toLowerCase()];
          if (m) activeCat = m;
        }
      }

      // Start
      (async function(){
        initFromURL();
        ALL = await fetchProducts();

        // Παράγαγε ΜΟΝΟ τις κύριες κατηγορίες που υπάρχουν στα προϊόντα (από τα sub-slugs)
        const presentMain = new Set();
        for (const p of ALL) {
          const m = SUB_TO_MAIN[String(p.cat||'').toLowerCase()];
          if (m) presentMain.add(m);
        }
        buildChips([...presentMain]);

        // Search
        searchInput?.addEventListener('input', (e)=>{
          q = e.target.value.trim();
          page = 1;
          render();
          updateURL();
        });

        // Sorting
        sortSel?.addEventListener('change', ()=>{
          page = 1;
          render();
          updateURL();
        });

        // First render
        render();
      })();
    })();
  </script>

  <!-- Searchbar helper παραμένει όπως το έχεις -->
  <script>
    (function(){
      const input = document.getElementById('search');
      const clear = document.getElementById('clearSearch');
      const wrap  = input?.closest('.searchbar');

      function sync(){ wrap?.classList.toggle('has-value', !!input?.value.trim()); }
      input?.addEventListener('input', sync);

      clear?.addEventListener('click', () => {
        if(!input) return;
        input.value = '';
        input.dispatchEvent(new Event('input', { bubbles:true }));
        input.focus();
      });

      document.addEventListener('keydown', (e) => {
        const el = document.activeElement;
        const typing = el && (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA' || el.isContentEditable);
        if (!typing && e.key === '/') { e.preventDefault(); input?.focus(); }
        else if (typing && e.key === 'Escape' && el === input) {
          if (input.value) { input.value = ''; input.dispatchEvent(new Event('input', { bubbles:true })); }
          else { input.blur(); }
        }
      });

      sync();
    })();
  </script>


  <div id="consent" style="position:fixed;inset:auto 12px 12px 12px;background:#fff;padding:12px;border:1px solid #ddd;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,.08);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;z-index:9999">
    Χρησιμοποιούμε cookies μόνο για την ανώνυμη στατιστική μέτρηση.
    <button id="c-accept">Αποδοχή</button>
    <button id="c-reject">Άρνηση</button>
  </div>

  <style>
    /* Συνολική διάταξη */
    #consent{
      max-width: 720px; 
      display: flex; 
      align-items: center; 
      gap: 10px; 
      flex-wrap: wrap;
    }
    /* Κουμπιά */
    #consent button{
      appearance: none;
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      font-weight: 600;
      cursor: pointer;
      transition: transform .06s ease, background-color .15s ease, border-color .15s ease;
    }
    #consent button:active{ transform: translateY(1px); }
    #consent #c-accept{
      background: #0ea5e9; 
      border-color: #0ea5e9; 
      color: #fff;
    }
    #consent #c-accept:hover{ filter: brightness(0.96); }
    #consent #c-reject:hover{ background: #f5f5f5; }

    /* Προσβασιμότητα */
    #consent button:focus{ outline: 2px solid currentColor; outline-offset: 2px; }

    /* Μικρές οθόνες: στοίχιση κουμπιών δεξιά/κάτω */
    @media (max-width: 520px){
      #consent{ justify-content: space-between; }
    }

    /* Προαιρετικά: μικρό fade-in αν δεν υπάρχει reduced motion */
    @media (prefers-reduced-motion: no-preference){
      #consent{ animation: cfade .2s ease-out; }
      @keyframes cfade{ from{ opacity:0; transform: translateY(6px) } to{ opacity:1; transform:none } }
    }
  </style>

  <script>
    (function(){
      const box = document.getElementById('consent');
      const KEY = 'ga_consent';

      const apply = (mode) => {
        gtag('consent', 'update', {
          analytics_storage: mode === 'granted' ? 'granted' : 'denied',
          ad_storage: 'denied',
          ad_user_data: 'denied',
          ad_personalization: 'denied'
        });
      };

      const saved = localStorage.getItem(KEY);
      if (saved) { apply(saved); box?.remove(); return; }

      const upd = (mode) => {
        localStorage.setItem(KEY, mode);
        apply(mode);
        box?.remove();
      };

      // button type & handlers
      const btnA = document.getElementById('c-accept');
      const btnR = document.getElementById('c-reject');
      btnA.setAttribute('type', 'button');
      btnR.setAttribute('type', 'button');
      btnA.onclick = () => upd('granted');
      btnR.onclick = () => upd('denied');
    })();
  </script>






</body>
</html>
